---
import type { CollectionEntry } from 'astro:content'

import options from 'virtual:koimi/options'

import ArticleTopBar from './ArticleTopBar.astro'

interface Props {
  article: CollectionEntry<'articles'>
}

const {
  data: { published, summary, title },
  id,
} = Astro.props.article;
---

<article
  class="h-feed group card bg-base-100 shadow-lg hover:shadow-xl transition md:hover:-translate-y-0.5"
  transition:animate="initial"
  transition:name={id}
>
  <div class="card-body">
    <ArticleTopBar {published} />
    <h2 class="card-title text-3xl">
      <!-- TODO: sort class -->
      <a
        class="bg-[length:100%_0%] bg-[position:0_88%] underline decoration-4 decoration-transparent group-hover:decoration-primary hover:bg-[length:100%_100%] hover:text-primary-content bg-gradient-to-t from-primary to-primary bg-no-repeat transition-all"
        href={`/${options.routes.articles.replace('[...slug]', id)}`}
      >
        {title}
      </a>
    </h2>
    {summary && <p>{summary}</p>}
  </div>
</article>
